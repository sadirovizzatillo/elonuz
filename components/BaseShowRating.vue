<script>
export default {
  name: 'BaseShowRating',
  props: {
    rating: {
      type: Number,
      default: 0,
      validator(value) {
        return value <= 5
      },
    },
    starWidth: {
      type: Number,
      default: 15,
    },
    starHeigth: {
      type: Number,
      default: 15,
    },
  },
  computed: {
    ratingArray() {
      if (this.rating !== 5) {
        const arrLength = Math.trunc(+this.rating)
        const lastRating = +this.rating - arrLength
        const ratingArray = Array.from({ length: arrLength }, () => 10)
        ratingArray.push(Math.ceil(lastRating * 10))
        return ratingArray
      } else {
        const ratingArray = Array.from({ length: 5 }, () => 10)
        return ratingArray
      }
    },
  },
}
</script>
<template>
  <div class="flex space-x-1">
    <svg
      v-for="(item, index) of new Array(5).fill('')"
      :key="index"
      :width="starWidth"
      :height="starHeigth"
      viewBox="0 0 10 10"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M4.03565 8.35995C4.63531 8.03058 5.36171 8.03058 5.96136 8.35995L7.49143 9.20037C7.53937 9.2267 7.59741 9.25939 7.64246 9.22838C7.66502 9.21285 7.67258 9.1893 7.66514 9.15774L7.34315 7.173C7.24137 6.54565 7.44382 5.90726 7.88855 5.45322L9.25137 4.06188C9.27393 4.03834 9.28149 4.01292 9.27405 3.98561C9.26661 3.95831 9.24789 3.94065 9.21789 3.93264L7.40215 3.65775C6.74378 3.55808 6.17819 3.13729 5.89351 2.53535L5.06619 0.786002C5.05107 0.754692 5.02851 0.739038 4.99851 0.739038C4.96851 0.739038 4.94595 0.754692 4.93083 0.786002L4.1035 2.53535C3.81882 3.13729 3.25324 3.55808 2.59487 3.65775L0.779125 3.93264C0.749124 3.9404 0.730403 3.95806 0.722963 3.98561C0.715523 4.01317 0.723083 4.03859 0.745644 4.06188L2.10526 5.44995C2.55179 5.90582 2.75397 6.54741 2.64949 7.17692L2.33409 9.07714C2.32519 9.13078 2.30999 9.19721 2.35455 9.22838C2.39944 9.25977 2.45767 9.22669 2.50568 9.20032L4.03565 8.35995ZM2.77109 9.89753C2.62853 9.97593 2.48416 10.0092 2.33799 9.99747C2.19183 9.9857 2.05682 9.93285 1.93298 9.83892C1.80913 9.74499 1.71913 9.62563 1.66296 9.48086C1.6068 9.33608 1.58988 9.18542 1.6122 9.02887L1.87465 7.43667C1.9785 6.80665 1.77529 6.16491 1.32773 5.70951L0.239822 4.60254C0.127257 4.49283 0.0541738 4.36171 0.0205723 4.20916C-0.0130291 4.05662 -0.00546882 3.90396 0.0432533 3.75117C0.0919754 3.59837 0.172619 3.47313 0.285184 3.37545C0.397749 3.27776 0.529034 3.21715 0.679041 3.1936L2.1213 2.97666C2.78095 2.87743 3.34771 2.45585 3.63245 1.8526L4.29072 0.458001C4.35816 0.309217 4.45572 0.19575 4.58341 0.117601C4.7111 0.0394515 4.84982 0.000251671 4.99959 1.19275e-06C5.14935 -0.000249286 5.28808 0.0389506 5.41577 0.117601C5.54345 0.196251 5.64102 0.309718 5.70846 0.458001L6.36673 1.8526C6.65147 2.45585 7.21823 2.87743 7.87788 2.97666L9.32014 3.1936C9.47014 3.21715 9.60323 3.27776 9.71939 3.37545C9.83556 3.47313 9.9162 3.59837 9.96132 3.75117C10.0064 3.90396 10.0121 4.05662 9.97824 4.20916C9.9444 4.36171 9.87132 4.49283 9.759 4.60254L8.67109 5.70951C8.22353 6.16491 8.02032 6.80665 8.12416 7.43667L8.38661 9.02887C8.40918 9.18542 8.39226 9.33608 8.33585 9.48086C8.27945 9.62563 8.18945 9.74499 8.06584 9.83892C7.94224 9.93285 7.80723 9.9857 7.66082 9.99747C7.51442 10.0092 7.37005 9.97993 7.22772 9.90955L5.96332 9.2099C5.36351 8.878 4.63551 8.87642 4.03427 9.20571L2.77109 9.89753Z"
        fill="#FFC700"
      />
      <mask
        :id="index"
        style="mask-type: alpha"
        maskUnits="userSpaceOnUse"
        x="0"
        y="0"
        :width="ratingArray[index] || 0"
        height="10"
      >
        <rect width="10" height="10" fill="#FFC700" />
      </mask>
      <g :mask="`url(#${index})`">
        <path
          d="M2.77109 9.89753C2.62853 9.97593 2.48416 10.0092 2.33799 9.99747C2.19183 9.9857 2.05682 9.93285 1.93298 9.83892C1.80913 9.74499 1.71913 9.62563 1.66296 9.48086C1.6068 9.33608 1.58988 9.18542 1.6122 9.02887L1.87465 7.43667C1.9785 6.80665 1.77529 6.16491 1.32773 5.70951L0.239822 4.60254C0.127257 4.49283 0.0541738 4.36171 0.0205723 4.20916C-0.0130291 4.05662 -0.00546882 3.90396 0.0432533 3.75117C0.0919754 3.59837 0.172619 3.47313 0.285184 3.37545C0.397749 3.27776 0.529034 3.21715 0.679041 3.1936L2.1213 2.97666C2.78095 2.87743 3.34771 2.45585 3.63245 1.8526L4.29072 0.458001C4.35816 0.309217 4.45572 0.19575 4.58341 0.117601C4.7111 0.0394515 4.84982 0.000251671 4.99959 1.19275e-06C5.14935 -0.000249286 5.28808 0.0389506 5.41577 0.117601C5.54345 0.196251 5.64102 0.309718 5.70846 0.458001L6.36673 1.8526C6.65147 2.45585 7.21823 2.87743 7.87788 2.97666L9.32014 3.1936C9.47014 3.21715 9.60323 3.27776 9.71939 3.37545C9.83556 3.47313 9.9162 3.59837 9.96132 3.75117C10.0064 3.90396 10.0121 4.05662 9.97824 4.20916C9.9444 4.36171 9.87132 4.49283 9.759 4.60254L8.67109 5.70951C8.22353 6.16491 8.02032 6.80665 8.12416 7.43667L8.38661 9.02887C8.40918 9.18542 8.39226 9.33608 8.33585 9.48086C8.27945 9.62563 8.18945 9.74499 8.06584 9.83892C7.94224 9.93285 7.80723 9.9857 7.66082 9.99747C7.51442 10.0092 7.37005 9.97993 7.22772 9.90955L5.96332 9.2099C5.36351 8.878 4.63551 8.87642 4.03427 9.20571L2.77109 9.89753Z"
          fill="#FFC700"
        />
      </g>
    </svg>
  </div>
</template>
